# TG_parser Production Environment (PostgreSQL)
# Copy this file to .env on production server

# =============================================================================
# Database Configuration (Production: PostgreSQL)
# =============================================================================

DB_TYPE=postgresql

# PostgreSQL connection
DB_HOST=postgres  # Use service name in Docker Compose
DB_PORT=5432
DB_NAME=tg_parser
DB_USER=tg_parser_user
DB_PASSWORD=CHANGE_THIS_TO_SECURE_PASSWORD_32_CHARS_MIN

# Connection Pool Settings
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600
DB_POOL_PRE_PING=true

# =============================================================================
# LLM Configuration
# =============================================================================

LLM_PROVIDER=openai
# LLM_MODEL=gpt-4o  # Production model

OPENAI_API_KEY=sk-proj-...

LLM_TEMPERATURE=0.0
LLM_MAX_TOKENS=4096

# GPT-5 Configuration (if using GPT-5)
LLM_REASONING_EFFORT=medium
LLM_VERBOSITY=low

# =============================================================================
# Telegram Configuration
# =============================================================================

TELEGRAM_API_ID=12345678
TELEGRAM_API_HASH=abcdef1234567890abcdef1234567890
TELEGRAM_PHONE=+1234567890
TELEGRAM_SESSION_NAME=tg_parser_session

# =============================================================================
# Processing Configuration (Production)
# =============================================================================

PROCESSING_MAX_ATTEMPTS_PER_MESSAGE=3
PROCESSING_RETRY_BACKOFF_BASE=2.0
PROCESSING_RETRY_JITTER_MAX=0.3

# =============================================================================
# Ingestion Configuration (Production)
# =============================================================================

INGESTION_MAX_ATTEMPTS_PER_RUN=5
INGESTION_RETRY_BACKOFF_BASE=2.0
INGESTION_RETRY_JITTER_MAX=0.3

# =============================================================================
# Output Configuration
# =============================================================================

OUTPUT_DIR=/app/data/output
PROMPTS_DIR=/app/prompts

# =============================================================================
# API Security (Production: ENABLED)
# =============================================================================

API_KEY_REQUIRED=true
API_KEYS={"SECURE_KEY_1":"production_client","SECURE_KEY_2":"monitoring"}

# =============================================================================
# Rate Limiting (Production)
# =============================================================================

RATE_LIMIT_ENABLED=true
RATE_LIMIT_PROCESS=10/minute
RATE_LIMIT_EXPORT=20/minute
RATE_LIMIT_DEFAULT=100/minute

# =============================================================================
# CORS Configuration (Production)
# =============================================================================

CORS_ORIGINS=["https://yourdomain.com","https://api.yourdomain.com"]

# =============================================================================
# Webhooks (Production)
# =============================================================================

WEBHOOK_TIMEOUT=30.0
WEBHOOK_MAX_RETRIES=3

# =============================================================================
# Agent Configuration (Production)
# =============================================================================

AGENT_PERSISTENCE_ENABLED=true
AGENT_RETENTION_DAYS=30
AGENT_RETENTION_MODE=export
AGENT_ARCHIVE_PATH=/app/data/archive/task_history
AGENT_STATS_ENABLED=true

# =============================================================================
# Observability (Production)
# =============================================================================

METRICS_ENABLED=true
SCHEDULER_ENABLED=true
SCHEDULER_CLEANUP_INTERVAL_HOURS=24
SCHEDULER_HEALTH_CHECK_INTERVAL_MINUTES=5

# =============================================================================
# Logging (Production: JSON format)
# =============================================================================

LOG_FORMAT=json
LOG_LEVEL=INFO

# =============================================================================
# Retry Configuration (Production)
# =============================================================================

RETRY_MAX_ATTEMPTS=5
RETRY_BACKOFF_BASE=2.0
RETRY_BACKOFF_MAX=120.0
RETRY_JITTER=0.3

