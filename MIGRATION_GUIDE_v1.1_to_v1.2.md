# Migration Guide: v1.1 ‚Üí v1.2

–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏ TG_parser —Å –≤–µ—Ä—Å–∏–∏ 1.1 –Ω–∞ –≤–µ—Ä—Å–∏—é 1.2.

---

## üéâ –ß—Ç–æ –Ω–æ–≤–æ–≥–æ –≤ v1.2

### Multi-LLM Support

v1.2 –¥–æ–±–∞–≤–ª—è–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É 4 LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤:

| –ü—Ä–æ–≤–∞–π–¥–µ—Ä | –ú–æ–¥–µ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é | –°–∫–æ—Ä–æ—Å—Ç—å | –ö–∞—á–µ—Å—Ç–≤–æ |
|-----------|---------------------|----------|----------|
| **OpenAI** | gpt-4o-mini | –°—Ä–µ–¥–Ω—è—è | –•–æ—Ä–æ—à–µ–µ |
| **Anthropic** | claude-sonnet-4-20250514 | –°—Ä–µ–¥–Ω—è—è | –õ—É—á—à–µ–µ |
| **Gemini** | gemini-2.0-flash-exp | –ë—ã—Å—Ç—Ä–∞—è | –û—Ç–ª–∏—á–Ω–æ–µ |
| **Ollama** | (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è) | –ú–µ–¥–ª–µ–Ω–Ω–∞—è | –•–æ—Ä–æ—à–µ–µ |

### Parallel Processing

–ù–æ–≤—ã–π —Ñ–ª–∞–≥ `--concurrency` –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏:

```bash
# –£—Å–∫–æ—Ä–µ–Ω–∏–µ –≤ 3-5x –¥–ª—è –æ–±–ª–∞—á–Ω—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
python -m tg_parser.cli process --channel @channel -c 5
```

### Docker Support

–ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Docker –∏ Docker Compose.

---

## üìã Checklist –º–∏–≥—Ä–∞—Ü–∏–∏

### 1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –û–±–Ω–æ–≤–∏—Ç—å requirements
pip install -r requirements.txt

# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞–∫–µ—Ç
pip install -e .
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ .env —Ñ–∞–π–ª–∞

**–î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):

```env
# v1.2: Multi-LLM Configuration

# –ü—Ä–æ–≤–∞–π–¥–µ—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, default: openai)
LLM_PROVIDER=openai

# API –∫–ª—é—á–∏ –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
ANTHROPIC_API_KEY=sk-ant-...your-key...
GEMINI_API_KEY=AI...your-key...

# –î–ª—è Ollama
LLM_BASE_URL=http://localhost:11434
```

> ‚úÖ **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –ï—Å–ª–∏ –≤—ã –Ω–µ –¥–æ–±–∞–≤–∏—Ç–µ –Ω–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, v1.2 –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ v1.1 —Å OpenAI.

### 3. –ú–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö

**–ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è!** –°—Ö–µ–º–∞ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å.

### 4. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏

–ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞ TG_parser, —Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –æ–ø—Ü–∏–π:

**–î–æ (v1.1):**
```bash
python -m tg_parser.cli process --channel @channel
```

**–ü–æ—Å–ª–µ (v1.2):**
```bash
# –ë—ã—Å—Ç—Ä–µ–µ —Å Gemini –∏ –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–∞—Ü–∏–µ–π
python -m tg_parser.cli process --channel @channel --provider gemini -c 5
```

---

## ‚ö†Ô∏è Breaking Changes

### –ù–µ—Ç breaking changes!

v1.2 –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ–±—Ä–∞—Ç–Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º–∞ —Å v1.1.

- –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ .env —Ñ–∞–π–ª—ã —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –Ω–µ —Ç—Ä–µ–±—É—é—Ç –º–∏–≥—Ä–∞—Ü–∏–∏

---

## üîß –ù–æ–≤—ã–µ CLI –æ–ø—Ü–∏–∏

### `process` –∫–æ–º–∞–Ω–¥–∞

| –û–ø—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ | Default |
|-------|----------|---------|
| `--provider` | LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä | `openai` (–∏–ª–∏ –∏–∑ .env) |
| `--model` | –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–æ–¥–µ–ª—å | (–∏–∑ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞) |
| `--concurrency` / `-c` | –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã | `1` |
| `--retry-failed` | –ü–æ–≤—Ç–æ—Ä–∏—Ç—å failed | `false` |

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```bash
# OpenAI (–∫–∞–∫ –≤ v1.1)
python -m tg_parser.cli process --channel @channel

# Anthropic Claude
python -m tg_parser.cli process --channel @channel --provider anthropic

# Google Gemini (—Å–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π)
python -m tg_parser.cli process --channel @channel --provider gemini -c 5

# Ollama (–ª–æ–∫–∞–ª—å–Ω—ã–π, –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π)
python -m tg_parser.cli process --channel @channel --provider ollama --model llama3.1:8b
```

---

## üê≥ Docker (–Ω–æ–≤–æ–µ –≤ v1.2)

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Docker

```bash
# –°–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑
docker build -t tg_parser:v1.2.0 .

# –ó–∞–ø—É—Å—Ç–∏—Ç—å
docker run --rm \
  -v $(pwd)/.env:/app/.env:ro \
  -v $(pwd)/data:/app/data \
  tg_parser:v1.2.0 process --channel @channel --provider gemini -c 5
```

### Docker Compose

```bash
docker-compose build
docker-compose run --rm tg_parser init
docker-compose run --rm tg_parser process --channel @channel
```

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –í—ã–±–æ—Ä –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞

| Use Case | –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä |
|----------|------------------------|
| –ë–æ–ª—å—à–∏–µ –æ–±—ä—ë–º—ã | Gemini (–±—ã—Å—Ç—Ä—ã–π, –¥–µ—à—ë–≤—ã–π) |
| –õ—É—á—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ | Anthropic Claude |
| –ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å | Ollama (–ª–æ–∫–∞–ª—å–Ω—ã–π) |
| –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | OpenAI (—Å—Ç–∞–±–∏–ª—å–Ω—ã–π) |

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ concurrency

| –ü—Ä–æ–≤–∞–π–¥–µ—Ä | –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π `-c` |
|-----------|-------------------|
| OpenAI | 3-5 |
| Anthropic | 3-5 |
| Gemini | 5-10 |
| **Ollama** | **1** (–Ω–µ –ø–∞—Ä–∞–ª–ª–µ–ª–∏—Ç—å!) |

> ‚ö†Ô∏è **–í–∞–∂–Ω–æ**: –î–ª—è Ollama –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–∞—Ü–∏—è **–∑–∞–º–µ–¥–ª—è–µ—Ç** –æ–±—Ä–∞–±–æ—Ç–∫—É –∏–∑-–∑–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –ª–æ–∫–∞–ª—å–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤.

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [TESTING_RESULTS_v1.2.md](TESTING_RESULTS_v1.2.md) ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- [LLM_SETUP_GUIDE.md](LLM_SETUP_GUIDE.md) ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- [DEVELOPMENT_ROADMAP.md](DEVELOPMENT_ROADMAP.md) ‚Äî –ø–ª–∞–Ω —Ä–∞–∑–≤–∏—Ç–∏—è

---

## ‚ùì FAQ

### Q: –ù—É–∂–Ω–æ –ª–∏ –ø–µ—Ä–µ–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã?

**A:** –ù–µ—Ç, —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ ProcessedDocument'—ã –æ—Å—Ç–∞—é—Ç—Å—è –≤–∞–ª–∏–¥–Ω—ã–º–∏. –ú–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä —Ç–æ–ª—å–∫–æ –¥–ª—è –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π.

### Q: –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤?

**A:** –î–∞! –£–∫–∞–∑—ã–≤–∞–π—Ç–µ `--provider` –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ `process`:

```bash
python -m tg_parser.cli process --channel channel1 --provider openai
python -m tg_parser.cli process --channel channel2 --provider gemini
```

### Q: –ß—Ç–æ –¥–µ–ª–∞—Ç—å –µ—Å–ª–∏ –æ–±–ª–∞—á–Ω—ã–π API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω?

**A:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Ollama –∫–∞–∫ fallback:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Ollama –∏ —Å–∫–∞—á–∞–π—Ç–µ –º–æ–¥–µ–ª—å
ollama pull qwen3:8b

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –æ–±—Ä–∞–±–æ—Ç–∫—É –ª–æ–∫–∞–ª—å–Ω–æ
python -m tg_parser.cli process --channel @channel --provider ollama --model qwen3:8b
```

---

**Version**: 1.0  
**Created**: 27 –¥–µ–∫–∞–±—Ä—è 2025

