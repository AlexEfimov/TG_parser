# ADR 0003 – Хранилище и индексация для базы знаний

## Статус
Proposed

## Контекст

TG_parser формирует `KnowledgeBaseEntry` на основе сообщений Telegram.  
Нужно выбрать подход к хранению и индексации, который:
- поддерживает поиск по тексту и метаданным;
- масштабируется по объёму данных;
- допускает использование векторного поиска в будущем.

## Решение (черновик)

- Логическая модель:
  - основная сущность – `KnowledgeBaseEntry` (см. `docs/contracts/knowledge_base_entry.schema.json`);
  - каждое сообщение Telegram порождает 0..N записей в базе знаний.
- Хранилище должно поддерживать:
  - хранение структуры и текста;
  - индексы по ключевым полям (канал, темы, дата и т.п.);
  - возможность добавления векторного индекса (отдельное хранилище или расширение текущего).
- Конкретный тип хранилища (PostgreSQL, SQLite, векторная БД и т.д.) будет зафиксирован в отдельном ADR или обновлении этого файла.

## Последствия

- Чёткий контракт `KnowledgeBaseEntry` позволяет менять конкретную СУБД/движок без переписывания всего пайплайна.
- Появляется возможность подключать несколько индексов (полнотекстовый, векторный) к одной логической модели.


