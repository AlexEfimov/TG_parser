# ADR 0002 – Подход к Telegram Ingestion

## Статус
Proposed

## Контекст

Нужно надёжно и эффективно получать сообщения из Telegram‑каналов с учётом:
- лимитов Telegram API;
- работы с историей и новыми сообщениями;
- потенциального расширения на большое количество каналов.

## Решение (черновик)

- Использовать выделенный модуль `ingestion.telegram`, инкапсулирующий все детали клиента/библиотеки.
- Хранить позицию/offset по каждому каналу, чтобы обеспечивать идемпотентность и продолжение после сбоев.
- Нормализовать сообщения в формат `RawTelegramMessage` сразу при приёме.
- Обеспечить конфигурируемые стратегии:
  - «исторический» прогон (backfill);
  - «онлайн» режим (только новые сообщения).

Конкретный выбор Telegram‑клиента и деталей реализации будет зафиксирован отдельным ADR или обновлением этого файла.

## Последствия

- Ingestion можно развивать и масштабировать независимо от остальной части пайплайна.
- Можно добавить альтернативные реализации (другой клиент/библиотека) при сохранении контракта `RawTelegramMessage`.


