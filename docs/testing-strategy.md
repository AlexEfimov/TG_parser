# Стратегия тестирования TG_parser

## Уровни тестов

- Unit‑тесты
  - Парсинг и нормализация Telegram‑сообщений.
  - Преобразования текста до/после LLM.
  - Локальная логика хранения (без реального хранилища).

- Интеграционные тесты
  - Ingestion ↔ Telegram‑клиент (c использованием заглушек/фикстур).
  - Processing ↔ Storage (проверка формирования и upsert `ProcessedDocument`, `TopicCard`, `TopicBundle` в `processing_storage.sqlite`).
  - Access / Export ↔ Артефакты (проверка правил маппинга артефактов в `KnowledgeBaseEntry` на этапе CLI‑экспорта: `kb_entries.ndjson`, `topics.json`, `topic_<topic_id>.json`).

- E2E‑тесты
  - От тестового канала Telegram до появления результата в экспортируемых артефактах (например `kb_entries.ndjson` и/или `topics.json`), т.е. “до KnowledgeBaseEntry на экспорте” (см. TR‑55..TR‑65).

## Тестовые данные

- Набор сырых сообщений (разные языки, форматы, длины, вложения).
- Размеченный небольшой датасет для оценки качества извлечённой информации.

## Метрики качества (MVP)

- Корректность базовых полей (канал, дата, id, текст).
- Точность выделения темы/категории.
- Доля успешно обработанных сообщений без ошибок пайплайна.


