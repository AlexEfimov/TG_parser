# Структура документации TG_parser и назначение шаблонов

## 1. Общая структура `docs/`

- `architecture.md` – обзор архитектуры системы:
  - цель TG_parser;
  - основные подсистемы (Ingestion, Processing, Storage, Access / Export);
  - высокоуровневый поток данных и нефункциональные требования.

- `product-overview.md` – бизнес‑описание продукта:
  - для кого создаётся TG_parser;
  - какие проблемы решает;
  - какую ценность даёт пользователям и организации.

- `business-requirements.md` – бизнес‑требования и сценарии использования:
  - цели уровня бизнеса (BR‑1, BR‑2, …);
  - ключевые use cases;
  - ограничения и ожидаемые метрики успеха.

- `tech-stack.md` – зафиксированный стек технологий (MVP):
  - язык и версия;
  - зафиксированные решения для Telegram, LLM (облачный, выбираемый провайдер) и хранилища;
  - инфраструктурные компоненты.

- `technical-requirements.md` – технические требования:
  - нефункциональные требования (производительность, надёжность, масштабируемость);
  - требования к интерфейсам и наблюдаемости;
  - связь с бизнес‑требованиями и архитектурой.

- `pipeline.md` – подробное описание пайплайна (ingestion → processing → export):
  - шаги от планировщика до сохранения raw/processed артефактов и CLI‑экспорта;
  - роли модулей на каждом шаге;
  - варианты режимов работы (история/онлайн).

- `testing-strategy.md` – стратегия тестирования:
  - уровни тестов (unit, integration, E2E);
  - тестовые данные;
  - базовые метрики качества.

- `contracts/` – формальные контракты между модулями в формате JSON Schema:
  - `raw_telegram_message.schema.json` – формат сырых сообщений из Telegram;
  - `processed_document.schema.json` – формат документа после обработки LLM;
  - `knowledge_base_entry.schema.json` – формат записи в базе знаний (в MVP формируется на этапе CLI‑экспорта);
  - `topic_card.schema.json` – формат карточки темы (описание темы + якорные первоисточники);
  - `topic_bundle.schema.json` – формат тематической подборки (тема → материалы: посты/комментарии).

- `adr/` – архитектурные решения (Architecture Decision Records):
  - `0001-overall-architecture.md` – общая архитектура TG_parser;
  - `0002-telegram-ingestion-approach.md` – подход к интеграции с Telegram;
  - `0003-storage-and-indexing.md` – подход к хранилищу и индексации.
  Текущий статус ключевых ADR: **Accepted** (решения зафиксированы и должны соблюдаться).

- `notes/` – рабочие заметки и дополнительные пояснения:
  - текущий файл описывает структуру документации и шаблоны.

## 2. Назначение шаблонов

- **Файлы архитектуры (`architecture.md`, `pipeline.md`)**
  - Используются архитектором/техлидом для фиксации целевой структуры системы.
  - Являются точкой входа для новых участников проекта и ИИ‑агентов.

- **Бизнес‑документы (`product-overview.md`, `business-requirements.md`)**
  - Фиксируют бизнес‑контекст, цели и сценарии использования продукта.
  - Служат основой для формулировки технических требований и архитектурных решений.

- **Технические документы (`tech-stack.md`, `technical-requirements.md`)**
  - Описывают выбранный стек технологий и технические ограничения.
  - Служат связующим звеном между бизнес‑документами и архитектурой/реализацией.

- **Контракты (`contracts/*.schema.json`)**
  - Определяют строгие форматы обмена данными между модулями:
    - Ingestion → Processing.
  - Любые изменения в контрактах должны оформляться через PR и, при необходимости, ADR.
  - На основе этих схем удобно генерировать проверки, фикстуры и тестовые данные.

- **ADR (`adr/*.md`)**
  - Фиксируют важные архитектурные решения, контекст и последствия.
  - Помогают агентам и людям понимать, *почему* принято то или иное решение.
  - Новые решения добавляются новыми файлами с инкрементальным номером.

- **Testing strategy (`testing-strategy.md`)**
  - Определяет, какие тесты должны появиться и на какие сценарии обращать внимание.
  - Используется тест‑агентом как исходный документ для планирования и написания тестов.

## 3. Использование ИИ‑агентами

- Архитектор‑агент обновляет `architecture.md`, `pipeline.md` и создаёт/обновляет ADR.
- Код‑агент реализует модули, опираясь на схемы из `contracts/` и решения из ADR.
- Тест‑агент использует `testing-strategy.md` и контракты для написания тестов и фикстур.
