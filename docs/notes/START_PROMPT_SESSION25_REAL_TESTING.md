# üöÄ Session 25: Real Channel Testing

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 30 –¥–µ–∫–∞–±—Ä—è 2025  
**–ü—Ä–µ–¥—ã–¥—É—â–∞—è —Å–µ—Å—Å–∏—è:** Session 24 (PostgreSQL Production Ready)  
**–¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è:** v3.1.1

---

## üìã –ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞

–≠—Ç–æ start prompt –¥–ª—è Session 25. –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã –æ–∑–Ω–∞–∫–æ–º—å—Å—è —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏ –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞.

---

## üìö –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è

### 1. –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

| –î–æ–∫—É–º–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
|----------|----------|-----------|
| [WHATS_NEXT.md](../../WHATS_NEXT.md) | –û–±—â–∏–π —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞, —á—Ç–æ –≥–æ—Ç–æ–≤–æ, —á—Ç–æ –¥–∞–ª—å—à–µ | ‚≠ê‚≠ê‚≠ê |
| [NEXT_STEPS.md](../../NEXT_STEPS.md) | –î–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω Session 25+ | ‚≠ê‚≠ê‚≠ê |
| [CHANGELOG.md](../../CHANGELOG.md) | –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π, v3.1.1 | ‚≠ê‚≠ê |

### 2. Session 24 (—Ç–æ–ª—å–∫–æ —á—Ç–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞)

| –î–æ–∫—É–º–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
|----------|----------|-----------|
| [SESSION24_FINAL_CHANGES.md](SESSION24_FINAL_CHANGES.md) | –î–µ—Ç–∞–ª–∏ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π Session 24 | ‚≠ê‚≠ê‚≠ê |
| [SESSION24_COMPLETE_SUMMARY.md](../../SESSION24_COMPLETE_SUMMARY.md) | –û–±–∑–æ—Ä Session 24 | ‚≠ê‚≠ê |

### 3. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

| –î–æ–∫—É–º–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
|----------|----------|-----------|
| [docs/USER_GUIDE.md](../USER_GUIDE.md) | –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | ‚≠ê‚≠ê |
| [PRODUCTION_DEPLOYMENT.md](../../PRODUCTION_DEPLOYMENT.md) | –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –¥–µ–ø–ª–æ—é | ‚≠ê‚≠ê |
| [README.md](../../README.md) | –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞, CLI –∫–æ–º–∞–Ω–¥—ã | ‚≠ê‚≠ê |

### 4. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)

| –î–æ–∫—É–º–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
|----------|----------|-----------|
| [docs/architecture.md](../architecture.md) | –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã | ‚≠ê |
| [docs/technical-requirements.md](../technical-requirements.md) | –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è | ‚≠ê |

---

## üéØ –¶–µ–ª—å Session 25: Real Channel Testing

### –û—Å–Ω–æ–≤–Ω–∞—è –∑–∞–¥–∞—á–∞

–ü—Ä–æ–≤–µ—Å—Ç–∏ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ TG_parser –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ä–µ–∞–ª—å–Ω—ã—Ö Telegram –∫–∞–Ω–∞–ª–∞—Ö —Å —Ä–∞–∑–Ω—ã–º —Ç–∏–ø–æ–º –∫–æ–Ω—Ç–µ–Ω—Ç–∞.

### –£–∂–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ (Session 24)

```
‚úÖ –ö–∞–Ω–∞–ª: @BiocodebySechenov
   - 8 –ø–æ—Å—Ç–æ–≤ —Å–æ–±—Ä–∞–Ω–æ
   - 8 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ (GPT-4o-mini)
   - 4 —Ç–µ–º—ã —Å–æ–∑–¥–∞–Ω—ã
   - Export —É—Å–ø–µ—à–µ–Ω
   - PostgreSQL backend —Ä–∞–±–æ—Ç–∞–µ—Ç
```

### –ü–ª–∞–Ω —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Session 25

```
1. –í—ã–±–æ—Ä —Ç–µ—Å—Ç–æ–≤—ã—Ö –∫–∞–Ω–∞–ª–æ–≤:
   - –†–∞–∑–Ω—ã–µ —è–∑—ã–∫–∏ (—Ä—É—Å—Å–∫–∏–π, –∞–Ω–≥–ª–∏–π—Å–∫–∏–π)
   - –†–∞–∑–Ω—ã–µ —Ç–∏–ø—ã –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (–Ω–æ–≤–æ—Å—Ç–∏, —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ, —Ä–∞–∑–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–µ)
   - –†–∞–∑–Ω—ã–µ –æ–±—ä—ë–º—ã (–º–∞–ª–µ–Ω—å–∫–∏–µ –∏ –±–æ–ª—å—à–∏–µ –∫–∞–Ω–∞–ª—ã)

2. –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:
   - Snapshot ingestion (–ø–æ–ª–Ω—ã–π —Å–±–æ—Ä)
   - Incremental ingestion (–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π)
   - Large batch processing (100+ —Å–æ–æ–±—â–µ–Ω–∏–π)
   - Concurrent processing

3. –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è —Å–±–æ—Ä–∞:
   - –í—Ä–µ–º—è ingestion –Ω–∞ N —Å–æ–æ–±—â–µ–Ω–∏–π
   - –ö–∞—á–µ—Å—Ç–≤–æ processing (summary, topics)
   - –ö–∞—á–µ—Å—Ç–≤–æ topicization
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ (–ø–∞–º—è—Ç—å, CPU, pool connections)

4. –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:
   - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
   - Tuning connection pool –¥–ª—è production
   - –£–ª—É—á—à–µ–Ω–∏–µ error handling
```

---

## üîß –¢–µ–∫—É—â–µ–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

### –í–µ—Ä—Å–∏—è: v3.1.1 (Production Tested)

```
‚úÖ PostgreSQL 16 ‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç
‚úÖ Connection Pooling ‚Äî QueuePool (5 connections + 10 overflow)
‚úÖ CLI ‚Äî –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Å PostgreSQL
‚úÖ Processing ‚Äî GPT-4o-mini tested
‚úÖ –¢–µ—Å—Ç—ã ‚Äî 411 passed, 24 skipped
```

### –ö–ª—é—á–µ–≤—ã–µ —Ñ–∞–π–ª—ã

```
tg_parser/
‚îú‚îÄ‚îÄ cli/                    # CLI –∫–æ–º–∞–Ω–¥—ã (–æ–±–Ω–æ–≤–ª–µ–Ω—ã –¥–ª—è PostgreSQL)
‚îÇ   ‚îú‚îÄ‚îÄ add_source_cmd.py
‚îÇ   ‚îú‚îÄ‚îÄ ingest_cmd.py
‚îÇ   ‚îú‚îÄ‚îÄ process_cmd.py
‚îÇ   ‚îú‚îÄ‚îÄ topicize_cmd.py
‚îÇ   ‚îú‚îÄ‚îÄ export_cmd.py
‚îÇ   ‚îî‚îÄ‚îÄ run_cmd.py          # One-shot pipeline
‚îú‚îÄ‚îÄ storage/
‚îÇ   ‚îú‚îÄ‚îÄ engine_factory.py   # SQLite/PostgreSQL selection
‚îÇ   ‚îî‚îÄ‚îÄ sqlite/
‚îÇ       ‚îî‚îÄ‚îÄ database.py     # Database.from_settings()
‚îî‚îÄ‚îÄ config/
    ‚îî‚îÄ‚îÄ settings.py         # DB_TYPE, DB_HOST, etc.
```

### Docker —Å–æ—Å—Ç–æ—è–Ω–∏–µ

```bash
# PostgreSQL —Ä–∞–±–æ—Ç–∞–µ—Ç
docker compose ps
# NAME                 IMAGE                STATUS
# tg_parser_postgres   postgres:16-alpine   Up (healthy)
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

```
PostgreSQL: localhost:5432/tg_parser
‚îú‚îÄ‚îÄ sources (1 –∑–∞–ø–∏—Å—å: BiocodebySechenov)
‚îú‚îÄ‚îÄ raw_messages (8 –∑–∞–ø–∏—Å–µ–π)
‚îú‚îÄ‚îÄ processed_documents (8 –∑–∞–ø–∏—Å–µ–π)
‚îú‚îÄ‚îÄ topic_cards (4 –∑–∞–ø–∏—Å–∏)
‚îî‚îÄ‚îÄ ... (14 —Ç–∞–±–ª–∏—Ü –≤—Å–µ–≥–æ)
```

---

## üìù CLI –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–∞–Ω–∞–ª–∞

```bash
python -m tg_parser.cli add-source \
  --source-id <channel_username> \
  --channel-id <channel_username> \
  --channel-username <channel_username> \
  --no-include-comments \
  --batch-size 100
```

### Ingestion

```bash
# Snapshot (–ø–æ–ª–Ω—ã–π —Å–±–æ—Ä)
python -m tg_parser.cli ingest \
  --source <source_id> \
  --mode snapshot \
  --limit 50

# Incremental (–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π)
python -m tg_parser.cli ingest \
  --source <source_id> \
  --mode incremental
```

### Processing

```bash
python -m tg_parser.cli process \
  --channel <channel_id>
```

### Topicization

```bash
python -m tg_parser.cli topicize \
  --channel <channel_id>
```

### Export

```bash
python -m tg_parser.cli export \
  --out ./output/<channel_id> \
  --channel <channel_id> \
  --pretty
```

### One-shot pipeline

```bash
python -m tg_parser.cli run \
  --source <source_id> \
  --output ./output/<channel_id> \
  --mode snapshot \
  --limit 50
```

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (.env)

```env
# Database (PostgreSQL)
DB_TYPE=postgresql
DB_HOST=localhost
DB_PORT=5432
DB_NAME=tg_parser
DB_USER=tg_parser_user
DB_PASSWORD=<password>

# LLM
LLM_PROVIDER=openai
LLM_MODEL=gpt-4o-mini
OPENAI_API_KEY=<key>

# Telegram
TELEGRAM_API_ID=<id>
TELEGRAM_API_HASH=<hash>
TELEGRAM_PHONE=<phone>
TELEGRAM_SESSION_NAME=tg_parser_session
```

---

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã Session 25

### Deliverables

1. **Test Report** ‚Äî –¥–æ–∫—É–º–µ–Ω—Ç —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ 3-5 –∫–∞–Ω–∞–ª–∞—Ö
2. **Performance Metrics** ‚Äî –∑–∞–º–µ—Ä—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
3. **Quality Assessment** ‚Äî –æ—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ processing –∏ topicization
4. **Recommendations** ‚Äî —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### –§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è

```
docs/notes/
‚îú‚îÄ‚îÄ SESSION25_TEST_REPORT.md       # –û—Ç—á—ë—Ç –æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
‚îî‚îÄ‚îÄ REAL_CHANNEL_BENCHMARKS.md     # –ë–µ–Ω—á–º–∞—Ä–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **Comments** ‚Äî –ø–æ–∫–∞ –Ω–µ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è (`--no-include-comments`)
2. **Media** ‚Äî —Ç–æ–ª—å–∫–æ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ, –±–µ–∑ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤
3. **Rate limits** ‚Äî Telegram –º–æ–∂–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å —á–∞—Å—Ç—ã–µ –∑–∞–ø—Ä–æ—Å—ã

### –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **–ü—Ä–∏–≤–∞—Ç–Ω—ã–µ –∫–∞–Ω–∞–ª—ã** ‚Äî –Ω—É–∂–Ω–æ –±—ã—Ç—å –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–º
2. **–ë–æ–ª—å—à–∏–µ –∫–∞–Ω–∞–ª—ã** ‚Äî –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –ª–∏–º–∏—Ç
3. **–†–∞–∑–Ω—ã–µ —è–∑—ã–∫–∏** ‚Äî GPT-4o-mini —Ö–æ—Ä–æ—à–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Ä—É—Å—Å–∫–∏–º/–∞–Ω–≥–ª–∏–π—Å–∫–∏–º

---

## üöÄ –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã

1. –ü—Ä–æ—á–∏—Ç–∞–π –¥–æ–∫—É–º–µ–Ω—Ç—ã –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ "–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã"
2. –ü—Ä–æ–≤–µ—Ä—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ Docker: `docker compose ps`
3. –ü—Ä–æ–≤–µ—Ä—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î: `docker compose exec postgres psql -U tg_parser_user -d tg_parser -c '\dt'`
4. –í—ã–±–µ—Ä–∏ –∫–∞–Ω–∞–ª—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
5. –ù–∞—á–Ω–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –ø–ª–∞–Ω—É

**–£–¥–∞—á–Ω–æ–π —Å–µ—Å—Å–∏–∏!** üéâ

